{% extends "base.html.twig" %}

{% block title %}Редагувати роботу - {{ site_name }}{% endblock %}

{% block content %}
  <section class="auth-section" style="padding-top: 150px; padding-bottom: 150px;">
    <div class="auth-container" style="max-width: 600px;">
      <h2 class="auth-title" style="color: #ff4500;">Редагувати роботу</h2>

      <form method="POST" enctype="multipart/form-data" class="auth-form">
        {% if error %}
          <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        <div class="mb-3">
          <label for="title" class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-file-earmark-text"></i> Назва роботи
            </span>
          </label>
          <input 
            type="text" 
            class="form-control" 
            id="title" 
            name="title" 
            required
            value="{{ work.title|sanitize }}"
          >
        </div>

        <div class="mb-3">
          <label for="category" class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-tags-fill"></i> Категорія
            </span>
          </label>
          <select class="form-control" id="category" name="category" required>
            <option value="">Виберіть категорію</option>
            <option value="Ілюстрація" {% if work.category == 'Ілюстрація' %}selected{% endif %}>Ілюстрація</option>
            <option value="Живопис" {% if work.category == 'Живопис' %}selected{% endif %}>Живопис</option>
            <option value="Графіка" {% if work.category == 'Графіка' %}selected{% endif %}>Графіка</option>
            <option value="Фотографія" {% if work.category == 'Фотографія' %}selected{% endif %}>Фотографія</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-chat-left-text-fill"></i> Опис
            </span>
          </label>
          <textarea 
            class="form-control" 
            id="description" 
            name="description" 
            rows="4"
          >{{ work.description|sanitize }}</textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-image"></i> Поточне зображення
            </span>
          </label>
          <div>
            <img src="{{ work.image|sanitize }}" alt="{{ work.title|sanitize }}" style="max-width: 200px; max-height: 200px; border-radius: 5px;">
          </div>
        </div>

        <div class="mb-3">
          <label for="image" class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-image"></i> Нове зображення (опціонально)
            </span>
          </label>
          <input 
            type="file" 
            class="form-control" 
            id="image" 
            name="image" 
            accept=".jpg,.jpeg,.png,.webp,.gif"
          >
          <small class="form-help">Залиште пусто, щоб зберегти поточне. Максимум 5MB.</small>
        </div>

        <button type="submit" class="btn btn-primary w-100">Зберегти зміни</button>
        <a href="dashboard.php" class="btn btn-secondary w-100 mt-2">Скасувати</a>
      </form>
    </div>
  </section>

  {% include 'footer.html.twig' %}
{% endblock %}
