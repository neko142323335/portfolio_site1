{% extends "base.html.twig" %}

{% block title %}Редагувати роботу - {{ site_name }}{% endblock %}

{% block content %}
  <section class="auth-section" style="padding-top: 150px; padding-bottom: 150px;">
    <div class="auth-container" style="max-width: 600px;">
      <h2 class="auth-title" style="color: #ff4500;">Редагувати роботу</h2>

      <form method="POST" enctype="multipart/form-data" class="auth-form">
        {% if error %}
          <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        <div class="mb-3">
          <label for="title" class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-file-earmark-text"></i> Назва роботи
            </span>
          </label>
          <input 
            type="text" 
            class="form-control" 
            id="title" 
            name="title" 
            required
            placeholder="Назва"
            value="{{ work.title|default('')|sanitize }}"
          >
        </div>

        <div class="mb-3">
          <label for="category" class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-tags-fill"></i> Категорія
            </span>
          </label>
          <select class="form-control" id="category" name="category" required>
            <option value="">Виберіть категорію</option>
            {% for category in categories|default([]) %}
              <option value="{{ category.name|sanitize }}" {% if work.category|default('') == category.name %}selected{% endif %}>
                {{ category.name|sanitize }}
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-chat-left-text-fill"></i> Опис
            </span>
          </label>
          <textarea 
            class="form-control" 
            id="description" 
            name="description" 
            rows="4"
            placeholder="Опис роботи..."
          >{{ work.description|default('')|sanitize }}</textarea>
        </div>

        <div class="mb-3">
          {% if work.image %}
            <div class="mb-2">
              <img src="/{{ work.image }}" alt="{{ work.title|sanitize }}" style="max-width: 200px; border-radius: 8px;">
              <p class="text-muted small mt-1">Поточне зображення</p>
            </div>
          {% endif %}
          <label for="image" class="form-label">
            <span style="color: #ff4500;">
              <i class="bi bi-image"></i> Нове зображення (необов'язково)
            </span>
          </label>
          <input 
            type="file" 
            class="form-control" 
            id="image" 
            name="image" 
            accept=".jpg,.jpeg,.png,.webp,.gif"
          >
          <small class="form-help">Максимум 5MB. Формати: JPG, PNG, WebP, GIF</small>
        </div>

        <button type="submit" class="btn btn-primary w-100">Зберегти зміни</button>
        <a href="/dashboard" class="btn btn-secondary w-100 mt-2">Скасувати</a>
      </form>
    </div>
  </section>

  {% include 'footer.html.twig' %}
{% endblock %}
